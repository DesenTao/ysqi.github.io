<!DOCTYPE html><html xmlns="https://www.w3.org/1999/xhtml" xmlns:og="https://ogp.me/ns#" lang="zh" id="doc" class="no-js"><head><title>如何判断是否是在GolangTest运行代码 |虞双齐Golang开发</title><meta name="description" content="在进行Go Test时需要对代码进行特殊初始化,但是如何才能在运行Go Test时就能知晓代码是运行"><meta name="keywords" content="Go, Go Test, "><meta name="author" content="虞双齐"><meta name="generator" content="Hugo 0.17"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="renderer" content="webkit"><meta name="applicable-device" content="pc,mobile"><meta name="MobileOptimized" content="width"><meta name="HandheldFriendly" content="true"><meta name="mobile-web-app-capable" content="yes"><link rel="icon" sizes="192x192" href="/img/app-icon64x64@2x.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="Ysqi"><link rel="apple-touch-icon-precomposed" href="/img/app-icon64x64@2x.png"><meta name="msapplication-TileImage" content="/img/app-icon64x64@2x.png"><meta name="msapplication-TileColor" content="#0e90d2"><meta property="og:site_name" content="虞双齐Golang开发"><meta property="og:locale" content="zh"><meta property="og:url" content="https://yushuangqi.com/blog/2016/how-to-know-running-within-gotest.html"><meta property="og:title" content="如何判断是否是在GolangTest运行代码"><meta property="og:type" content="article"><meta property="article:published_time" content="2016-10-03 19:51:14"><meta property="article:modified_time" content="2016-10-03 19:51:14"><meta property="article:tag" content="Go"><meta property="article:tag" content="Go Test"><meta name="og:description" content="在进行Go Test时需要对代码进行特殊初始化,但是如何才能在运行Go Test时就能知晓代码是运行"><link rel="stylesheet" type="text/css" href="/css/jiandan.css?v=20161122"><script type="text/javascript">var doc = document.getElementById('doc');
	doc.removeAttribute('class', 'no-js');
	doc.setAttribute('class', 'js');</script><script type="text/javascript">var changeActive = function() {
		var page = document.getElementById("page");		
		if (page.getAttribute("class") === "not-active") {
			page.setAttribute("class", "active-sidebar");		
		} else if (page.getAttribute("class") === "active-sidebar") {
			page.setAttribute("class", "not-active");
		}		
	}
	
	window.onload = function() {
		if(document.getElementById("sidebar-button")) {
			var sidebar_button = document.getElementById("sidebar-button");
			sidebar_button.onclick = function(event) {
				changeActive();
				event.preventDefault();
			}
		}
		
	}
	
	window.onresize = function() {
		var page = document.getElementById("page");	
		page.setAttribute("class", "not-active");	
	}</script></head><body id="page" class="not-active"><div class="container"><header class="header writingsheader"><nav class="off-canvas-nav-links"><ul><li class="menuli"><a class="menubutton" href="#menu">Menu</a></li><li id="site-title"><a class="menulogo" id="sidebar-button" href="#sidebar">附件信息</a></li></ul></nav></header><section role="main"><article class="entry writingsentry" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 itemprop="headline"><a rel="bookmark" href="https://yushuangqi.com/blog/2016/how-to-know-running-within-gotest.html">如何判断是否是在GolangTest运行代码</a></h1><p class="attribution"><span itemprop="author"><span itemscope itemtype="http://schema.org/Person">文/ <a href="https://yushuangqi.com"><span itemprop="name">虞双齐</span></a> </span></span><span class="right"><time itemprop="datePublished" datetime="2016-10-03">2016年10月03日</time></span></p></header><div itemprop="articleBody"><p>在进行Go Test时需要对代码进行特殊初始化,但是如何才能在运行Go Test时就能知晓代码是运行在Go Test模式下的呢?</p><p>经过各种尝试,总算能非常靠谱的进行Go Test 识别!</p><h3 id="需求">需求</h3><p>在运行Go Test时需要和 Go 调式区分配置文件,Test下使用特定配置文件,已区别其他情况下的数据库等配置信息. 如: + 在 go run 下使用的配置信息</p><div class="highlight" style="background:#f0f0f0"><pre style="line-height:125%"><span></span><span style="color:#4070a0">APP</span> <span style="color:#666">=</span> <span style="color:#4070a0">DEV开发</span>
<span style="color:#4070a0">port</span> <span style="color:#666">=</span> <span style="color:#4070a0">8080</span>
<span style="color:#4070a0">dbName</span> <span style="color:#666">=</span> <span style="color:#4070a0">DevATOP</span>
</pre></div><ul><li>在 go test 下使用的配置信息</li></ul><div class="highlight" style="background:#f0f0f0"><pre style="line-height:125%"><span></span><span style="color:#4070a0">APP</span> <span style="color:#666">=</span> <span style="color:#4070a0">JUSTTest</span>
<span style="color:#4070a0">port</span> <span style="color:#666">=</span> <span style="color:#4070a0">6060</span>
<span style="color:#4070a0">dbName</span> <span style="color:#666">=</span> <span style="color:#4070a0">TESTATOP</span>
</pre></div><h3 id="解决方案">解决方案</h3><p>在初始化配置时,判断所属模式.不同模式使用不同配置文件: + go run 模式下通过文件 app.dev.cfg 初始化配置 + go test 模式下通过文件 app.test.cfg 初始化配置</p><h3 id="代码实现">代码实现</h3><p>如何运行时判断模式,一般有几种做饭,但即便上就是需要一个模式标记</p><ol><li><p>运行时携带参数 <code>-runmode=test|dev</code>的方式,解析运行参数来加载</p><div class="highlight" style="background:#f0f0f0"><pre style="line-height:125%"><span></span><span style="color:#007020;font-weight:700">func</span> init() {
runMode <span style="color:#666">:=</span> flag.String(<span style="color:#4070a0">&quot;runMode&quot;</span>,<span style="color:#4070a0">&quot;dev&quot;</span>,<span style="color:#4070a0">&quot;代码运行模式&quot;</span>) 
flag.Parse()
      
cfg <span style="color:#666">:=</span><span style="color:#4070a0">&quot;app.dev.cfg&quot;</span>
<span style="color:#007020;font-weight:700">if</span> <span style="color:#666">*</span>runMode=<span style="color:#4070a0">&quot;test&quot;</span>{
    cfg=<span style="color:#4070a0">&quot;app.test.cfg&quot;</span>
} 
}
</pre></div><p>此方式不太适运用在 go test 下,因为你比较运行 go test 时基本上基于工具,而非手工执行命令,不方便添加入参</p></li><li><p>运行时直接携带参数 <code>-config=/app/app.dev.cfg</code></p><div class="highlight" style="background:#f0f0f0"><pre style="line-height:125%"><span></span><span style="color:#007020;font-weight:700">func</span> init() {
cfg <span style="color:#666">:=</span> flag.String(<span style="color:#4070a0">&quot;config&quot;</span>,<span style="color:#4070a0">&quot;./app.dev.cfg&quot;</span>,<span style="color:#4070a0">&quot;配置文件路径&quot;</span>) 
flag.Parse() 
}
</pre></div><p>这种方式虽然灵活,但还是同上面一种方式运用在 go test 下</p></li><li><p>使用环境变量,形式同方案2</p><div class="highlight" style="background:#f0f0f0"><pre style="line-height:125%"><span></span><span style="color:#007020;font-weight:700">func</span> init() {
cfg <span style="color:#666">:=</span> os.Getenv(<span style="color:#4070a0">&quot;appConfigPATH&quot;</span>) 
}
</pre></div></li></ol><h3 id="最佳方案">最佳方案</h3><p>不是说上面的方式不好,而是运用到 go test 下,便不那么好使,特别是我现在使用的是VS Code. 下面这种方式变为 Go test 而生了.</p><p>基于Go test 工具带有多个参数,参数Flag有默认值,在 test 运行时进行解析.</p><p>具体参数可见: <code>go test -help</code> .</p><p>既然有参数,则我们组需要去判断运行时是否包含 go test 所携带的参数,如: &gt; <code>-v</code> &gt; &gt; Verbose output: log all tests as they are run. Also print all text from Log and Logf calls even if the test succeeds.</p><p>因此在代码中的判断如下:</p><div class="highlight" style="background:#f0f0f0"><pre style="line-height:125%"><span></span><span style="color:#007020;font-weight:700">func</span> init() {
    cfg <span style="color:#666">:=</span><span style="color:#4070a0">&quot;app.dev.cfg&quot;</span>
    <span style="color:#007020;font-weight:700">if</span> flag.Lookup(<span style="color:#4070a0">&quot;test.v&quot;</span>) <span style="color:#666">!=</span> <span style="color:#007020;font-weight:700">nil</span> {
        <span style="color:#60a0b0;font-style:italic">//flag不为空,则说明存在test所拥有的参数,是在 go test 模式</span>
        cfg=<span style="color:#4070a0">&quot;app.test.cfg&quot;</span>
    }
}
</pre></div><p>此外完整代码,打印下所有的参数,实际上就是 <code>go test -help</code>的参数信息:</p><div class="highlight" style="background:#f0f0f0"><pre style="line-height:125%"><span></span><span style="color:#007020;font-weight:700">package</span> main

<span style="color:#007020;font-weight:700">import</span> (
	<span style="color:#4070a0">&quot;flag&quot;</span>
	<span style="color:#4070a0">&quot;fmt&quot;</span>
)

<span style="color:#007020;font-weight:700">func</span> main() {
	sayHello()
}

<span style="color:#007020;font-weight:700">func</span> sayHello() { 
	flag.VisitAll(<span style="color:#007020;font-weight:700">func</span>(f <span style="color:#666">*</span>flag.Flag) {
		fmt.Printf(<span style="color:#4070a0">&quot;%#v \n&quot;</span>, f)
	}) 
}
</pre></div><div class="highlight" style="background:#f0f0f0"><pre style="line-height:125%"><span></span><span style="color:#007020;font-weight:700">package</span> main

<span style="color:#007020;font-weight:700">import</span> <span style="color:#4070a0">&quot;testing&quot;</span>

<span style="color:#007020;font-weight:700">func</span> TestSayHello(t <span style="color:#666">*</span>testing.T) {
	sayHello()
}
</pre></div><p>Output:</p><div class="highlight" style="background:#f0f0f0"><pre style="line-height:125%"><span></span><span style="color:#666">===</span> RUN   TestSayHello
print Flag...
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.bench&quot;</span>, Usage:<span style="color:#4070a0">&quot;regular expression per path component to select benchmarks to run&quot;</span>, Value:<span style="color:#666">(</span>*flag.stringValue<span style="color:#666">)(</span>0xc420010390<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.benchmem&quot;</span>, Usage:<span style="color:#4070a0">&quot;print memory allocations for benchmarks&quot;</span>, Value:<span style="color:#666">(</span>*flag.boolValue<span style="color:#666">)(</span>0xc4200103b2<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;false&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.benchtime&quot;</span>, Usage:<span style="color:#4070a0">&quot;approximate run time for each benchmark&quot;</span>, Value:<span style="color:#666">(</span>*flag.durationValue<span style="color:#666">)(</span>0xc420010288<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;1s&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.blockprofile&quot;</span>, Usage:<span style="color:#4070a0">&quot;write a goroutine blocking profile to the named file after execution&quot;</span>, Value:<span style="color:#666">(</span>*flag.stringValue<span style="color:#666">)(</span>0xc4200104b0<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.blockprofilerate&quot;</span>, Usage:<span style="color:#4070a0">&quot;if &gt;= 0, calls runtime.SetBlockProfileRate()&quot;</span>, Value:<span style="color:#666">(</span>*flag.intValue<span style="color:#666">)(</span>0xc420010488<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;1&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.count&quot;</span>, Usage:<span style="color:#4070a0">&quot;run tests and benchmarks `n` times&quot;</span>, Value:<span style="color:#666">(</span>*flag.uintValue<span style="color:#666">)(</span>0xc4200103f8<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;1&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.coverprofile&quot;</span>, Usage:<span style="color:#4070a0">&quot;write a coverage profile to the named file after execution&quot;</span>, Value:<span style="color:#666">(</span>*flag.stringValue<span style="color:#666">)(</span>0xc420010410<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.cpu&quot;</span>, Usage:<span style="color:#4070a0">&quot;comma-separated list of number of CPUs to use for each test&quot;</span>, Value:<span style="color:#666">(</span>*flag.stringValue<span style="color:#666">)(</span>0xc420010510<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.cpuprofile&quot;</span>, Usage:<span style="color:#4070a0">&quot;write a cpu profile to the named file during execution&quot;</span>, Value:<span style="color:#666">(</span>*flag.stringValue<span style="color:#666">)(</span>0xc420010490<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.memprofile&quot;</span>, Usage:<span style="color:#4070a0">&quot;write a memory profile to the named file after execution&quot;</span>, Value:<span style="color:#666">(</span>*flag.stringValue<span style="color:#666">)(</span>0xc420010450<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.memprofilerate&quot;</span>, Usage:<span style="color:#4070a0">&quot;if &gt;=0, sets runtime.MemProfileRate&quot;</span>, Value:<span style="color:#666">(</span>*flag.intValue<span style="color:#666">)(</span>0xc420010470<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;0&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.outputdir&quot;</span>, Usage:<span style="color:#4070a0">&quot;directory in which to write profiles&quot;</span>, Value:<span style="color:#666">(</span>*flag.stringValue<span style="color:#666">)(</span>0xc4200103d0<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.parallel&quot;</span>, Usage:<span style="color:#4070a0">&quot;maximum test parallelism&quot;</span>, Value:<span style="color:#666">(</span>*flag.intValue<span style="color:#666">)(</span>0xc420010508<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;8&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.run&quot;</span>, Usage:<span style="color:#4070a0">&quot;regular expression to select tests and examples to run&quot;</span>, Value:<span style="color:#666">(</span>*flag.stringValue<span style="color:#666">)(</span>0xc420010430<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.short&quot;</span>, Usage:<span style="color:#4070a0">&quot;run smaller test suite to save time&quot;</span>, Value:<span style="color:#666">(</span>*flag.boolValue<span style="color:#666">)(</span>0xc4200103c5<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;false&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.timeout&quot;</span>, Usage:<span style="color:#4070a0">&quot;if positive, sets an aggregate time limit for all tests&quot;</span>, Value:<span style="color:#666">(</span>*flag.durationValue<span style="color:#666">)(</span>0xc420010500<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;0s&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.trace&quot;</span>, Usage:<span style="color:#4070a0">&quot;write an execution trace to the named file after execution&quot;</span>, Value:<span style="color:#666">(</span>*flag.stringValue<span style="color:#666">)(</span>0xc4200104e0<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;&quot;</span><span style="color:#666">}</span> 
&amp;flag.Flag<span style="color:#666">{</span>Name:<span style="color:#4070a0">&quot;test.v&quot;</span>, Usage:<span style="color:#4070a0">&quot;verbose: print additional output&quot;</span>, Value:<span style="color:#666">(</span>*flag.boolValue<span style="color:#666">)(</span>0xc4200103cc<span style="color:#666">)</span>, DefValue:<span style="color:#4070a0">&quot;false&quot;</span><span style="color:#666">}</span> 
print end.
--- PASS: TestSayHello <span style="color:#666">(</span><span style="color:#40a070">0</span>.00s<span style="color:#666">)</span>
PASS
ok  	github.com/ysqi/try	<span style="color:#40a070">0</span>.006s
Success: Tests passed.
</pre></div><h3 id="总结">总结</h3><p>采用一种巧妙的方式,便能清晰的标识出 go test 场景,无入侵,简洁清晰. 其实此方式也是在 Stackoverflow 看到的: <a href="http://stackoverflow.com/questions/14249217/how-do-i-know-im-running-within-go-test">http://stackoverflow.com/questions/14249217/how-do-i-know-im-running-within-go-test</a> ,在此一记,给大家提供一种思路,如何在运行时判断是否是 go test 运行模式.</p></div><aside id="meta"><meta itemprop="wordCount" content="430"><meta itemprop="url" content="https://yushuangqi.com/blog/2016/how-to-know-running-within-gotest.html"></aside></article><div><div class="attribution"><div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_youdao" data-cmd="youdao" title="分享到有道云笔记"></a><a href="#" class="bds_mshare" data-cmd="mshare" title="分享到一键分享"></a></div><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","qzone","tsina","bdysc","weixin","tqq","tieba","douban","sqq","youdao","qingbiji","mail","evernotecn","copy","print"],"bdPic":"","bdStyle":"0","bdSize":"32"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script></div><div><ul class="rel_links"><li class="rel_linksli"><span id="topics">分类: <a href="/topics/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%BC%80%E5%8F%91.html" rel="category">编程语言与开发</a> </span><span id="tags">标签: <a href="/tags/go.html" rel="tag">Go</a> <a href="/tags/go-test.html" rel="tag">Go Test</a></span></li><li class="rel_linksli rel_prev"><a href="https://yushuangqi.com/blog/2016/golang-bing-fa-mo-shi-chao-shi-he-ji-xu--go-concurrency-patterns-timing-out-moving-on.html">Golang 并发模式超时和继续 Go Concurrency Patterns: Timing out moving on</a></li><li class="rel_linksli rel_next"><a href="https://yushuangqi.com/blog/2016/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8mac%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5win10%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html">如何使用MAC远程连接Win10操作系统</a></li></ul></div><aside id="comments"><div><div class="ds-thread" data-thread-key="75640b7607fc2f98565072e9afae5a99" data-title="如何判断是否是在GolangTest运行代码" data-url="https://yushuangqi.com/blog/2016/how-to-know-running-within-gotest.html"></div></div></aside><div><section id="author"><h4>About author</h4><p><strong>虞双齐</strong>，开源爱好者，Golang开发独立咨询顾问。为国内客户提供Golang开发、技术实战、架构等咨询服务。</p><p>动态分享到微博<a href="http://weibo.com/234665601" rel="nofollow">@虞双齐</a>，代码存放在 <a href="http://github.com/ysqi" rel="nofollow">Github</a>，博文分享在 <a href="https://yushuangqi.com" title="虞双齐Golang开发">个人博客</a>上。</p></section></div></div></section><section id="sidebar" role="complementary"><aside class="writings"><a href="/" class="sideimg sideimgwritings">Home</a> <q class="dquote">读书之法，莫贵于循序而致精。<cite>—宋·朱熹《性理精义》</cite></q><ul class="rel_links"><li class="rel_linksli"><a href="http://weibo.com/234665601" title="关注虞双齐的微博" rel="nofollow">我的微博</a></li><li class="rel_linksli"><a href="https://github.com/ysqi" title="访问虞双齐的Github" rel="nofollow">我的 Github</a></li></ul></aside><aside><div class="ds-recent-comments" data-num-items="5" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="70"></div></aside></section><nav id="menu" role="navigation"><ul id="nav" class="navlist"><li class="navtop"><a class="navtoplink" href="#page"><span>Top</span></a></li><li><a class="navabout" href="/"><span>首页</span></a></li><li><a class="navwritings" href="/topics/"><span>博文</span></a></li><li><a class="navpresos" href="/book.html"><span>电子书</span></a></li><li><a class="navabout" href="/about/"><span>关于我</span></a></li></ul></nav></div><footer class="site-footer"><ul class="footeractions"><li><a class="footeraction" href="http://weibo.com/234665601" rel="nofollow"><span class="footeractionWeibo">Follow on Weibo</span></a></li><li><a href="http://validator.w3.org/check?uri=https%3a%2f%2fyushuangqi.com%2fblog%2f2016%2fhow-to-know-running-within-gotest.html" rel="nofollow" target="blank"><img src="http://static.yushuangqi.com/assets/valid-html401.png" alt="Valid XHTMl 4.0"></a></li><li><a href="http://jigsaw.w3.org/css-validator/validator?uri=https%3a%2f%2fyushuangqi.com%2fblog%2f2016%2fhow-to-know-running-within-gotest.html" rel="nofollow" target="blank"><img src="http://static.yushuangqi.com/assets/valid-css2.png" alt="Valid XHTMl 4.0"></a></li></ul><p>©2015-2016 虞双齐-Golang开发独立开发专家。欢迎<a href="/about/" rel="nofollow">联系我</a>，<a href="http://www.miitbeian.gov.cn/" target="bank" rel="nofollow" style="color:#c9c9c9">粤ICP备14032560号-4</a></p></footer><script type="text/javascript">var duoshuoQuery = {short_name:"ysqi"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-44627932-2', 'auto');
  ga('send', 'pageview');</script></body></html>