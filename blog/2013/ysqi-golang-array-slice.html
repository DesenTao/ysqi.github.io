<!DOCTYPE html><html xmlns="https://www.w3.org/1999/xhtml" xmlns:og="https://ogp.me/ns#" lang="zh" id="doc" class="no-js"><head><title>老虞学Golang-数组和切片 |虞双齐Golang开发与SRE运维</title><meta name="description" content="数组 Arrays 数组是内置(build-in)类型,是一组同类型数据的集合，它是值类型，通过从0"><meta name="keywords" content="Go, 笔记, 教程, "><meta name="author" content="虞双齐"><meta name="generator" content="Hugo 0.17"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="renderer" content="webkit"><meta name="applicable-device" content="pc,mobile"><meta name="MobileOptimized" content="width"><meta name="HandheldFriendly" content="true"><meta name="mobile-web-app-capable" content="yes"><link rel="icon" sizes="192x192" href="/img/app-icon64x64@2x.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="Ysqi"><link rel="apple-touch-icon-precomposed" href="/img/app-icon64x64@2x.png"><meta name="msapplication-TileImage" content="/img/app-icon64x64@2x.png"><meta name="msapplication-TileColor" content="#0e90d2"><meta property="og:site_name" content="虞双齐Golang开发与SRE运维"><meta property="og:locale" content="zh"><meta property="og:url" content="https://yushuangqi.com/blog/2013/ysqi-golang-array-slice.html"><meta property="og:title" content="老虞学Golang-数组和切片"><meta property="og:type" content="article"><meta property="article:published_time" content="2013-04-04 00:00:00"><meta property="article:modified_time" content="2013-04-04 00:00:00"><meta property="article:tag" content="Go"><meta property="article:tag" content="笔记"><meta property="article:tag" content="教程"><meta name="og:description" content="数组 Arrays 数组是内置(build-in)类型,是一组同类型数据的集合，它是值类型，通过从0"><link rel="stylesheet" type="text/css" href="/css/jiandan.css?v=20170207"><script type="text/javascript">var doc = document.getElementById('doc');
	doc.removeAttribute('class', 'no-js');
	doc.setAttribute('class', 'js');</script><script type="text/javascript">var changeActive = function() {
		var page = document.getElementById("page");		
		if (page.getAttribute("class") === "not-active") {
			page.setAttribute("class", "active-sidebar");		
		} else if (page.getAttribute("class") === "active-sidebar") {
			page.setAttribute("class", "not-active");
		}		
	}
	
	window.onload = function() {
		if(document.getElementById("sidebar-button")) {
			var sidebar_button = document.getElementById("sidebar-button");
			sidebar_button.onclick = function(event) {
				changeActive();
				event.preventDefault();
			}
		}
		
	}
	
	window.onresize = function() {
		var page = document.getElementById("page");	
		page.setAttribute("class", "not-active");	
	}</script></head><body id="page" class="not-active"><div class="container"><header class="header writingsheader"><nav class="off-canvas-nav-links"><ul><li class="menuli"><a class="menubutton" href="#menu">Menu</a></li><li id="site-title"><a class="menulogo" id="sidebar-button" href="#sidebar">附件信息</a></li></ul></nav></header><section role="main"><article class="entry writingsentry" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 itemprop="headline"><a rel="bookmark" href="https://yushuangqi.com/blog/2013/ysqi-golang-array-slice.html">老虞学Golang-数组和切片</a></h1><p class="attribution"><span itemprop="author"><span itemscope itemtype="http://schema.org/Person">文/ <a href="https://yushuangqi.com"><span itemprop="name">虞双齐</span></a> </span></span><span class="right"><time itemprop="datePublished" datetime="2013-04-04">2013年04月04日</time></span></p></header><div itemprop="articleBody"><h3 id="数组-arrays">数组 Arrays</h3><p>数组是内置(build-in)类型,是一组同类型数据的集合，它是值类型，通过从0开始的下标索引访问元素值。在初始化后长度是固定的，无法修改其长度。当作为方法的入参传入时将复制一份数组而不是引用同一指针。数组的长度也是其类型的一部分，通过内置函数len(array)获取其长度。</p><h4 id="初始化">初始化</h4><p>数组的初始化有多种形式,<a href="arraysInitDemo">查看示例代码</a> , <a href="arraysInitDemo_play">在线运行示例代码</a></p><ul><li><code>[5] int {1,2,3,4,5}</code><br>长度为5的数组，其元素值依次为：1，2，3，4，5</li><li><code>[5] int {1,2}</code><br>长度为5的数组，其元素值依次为：1，2，0，0，0 。在初始化时没有指定初值的元素将会赋值为其元素类型int的默认值0,string的默认值是&rdquo;&rdquo;</li><li><code>[...] int {1,2,3,4,5}</code><br>长度为5的数组，其长度是根据初始化时指定的元素个数决定的</li><li><code>[5] int { 2:1,3:2,4:3}</code><br>长度为5的数组，key:value,其元素值依次为：0，0，1，2，3。在初始化时指定了2，3，4索引中对应的值：1，2，3</li><li><code>[...] int {2:1,4:3}</code><br>长度为5的数组，起元素值依次为：0，0，1，0，3。由于指定了最大索引4对应的值3，根据初始化的元素个数确定其长度为5</li></ul><h4 id="赋值与使用">赋值与使用</h4><p>数组通过下标访问元素，可修改其元素值</p><div class="highlight" style="background:#f0f0f0"><pre style="line-height:125%"><span></span>arr <span style="color:#666">:=</span>[<span style="color:#666">...</span>] <span style="color:#902000">int</span> {<span style="color:#40a070">1</span>,<span style="color:#40a070">2</span>,<span style="color:#40a070">3</span>,<span style="color:#40a070">4</span>,<span style="color:#40a070">5</span>}
arr[<span style="color:#40a070">4</span>]=arr[<span style="color:#40a070">1</span>]<span style="color:#666">+</span><span style="color:#007020">len</span>(arr)      <span style="color:#60a0b0;font-style:italic">//arr[4]=2+5</span>
</pre></div><p>通过for遍历数组元素,<a href="arraysForDemo">查看示例代码</a>,<a href="arraysForDemo_play">在线运行示例代码</a></p><div class="highlight" style="background:#f0f0f0"><pre style="line-height:125%"><span></span>arr <span style="color:#666">:=</span> [<span style="color:#40a070">5</span>]<span style="color:#902000">int</span>{<span style="color:#40a070">5</span>, <span style="color:#40a070">4</span>, <span style="color:#40a070">3</span>}

<span style="color:#007020;font-weight:700">for</span> index, value <span style="color:#666">:=</span> <span style="color:#007020;font-weight:700">range</span> arr {
	fmt.Printf(<span style="color:#4070a0">&quot;arr[%d]=%d \n&quot;</span>, index, value)
}

<span style="color:#007020;font-weight:700">for</span> index <span style="color:#666">:=</span> <span style="color:#40a070">0</span>; index &lt; <span style="color:#007020">len</span>(arr); index<span style="color:#666">++</span> {
	fmt.Printf(<span style="color:#4070a0">&quot;arr[%d]=%d \n&quot;</span>, index, arr[index])
}
</pre></div><p>数组是值类型，将一个数组赋值给另一个数组时将复制一份新的元素,<a href="arraysValueDemo">查看示例代码</a>,<a href="arraysValueDemo_play">在线运行示例代码</a></p><div class="highlight" style="background:#f0f0f0"><pre style="line-height:125%"><span></span>	arr2 <span style="color:#666">:=</span> [<span style="color:#40a070">5</span>]<span style="color:#902000">int</span>{<span style="color:#40a070">1</span>, <span style="color:#40a070">2</span>}
	arr5 <span style="color:#666">:=</span> arr2
	arr5[<span style="color:#40a070">0</span>] = <span style="color:#40a070">5</span>
	arr2[<span style="color:#40a070">4</span>] = <span style="color:#40a070">2</span>
	fmt.Printf(<span style="color:#4070a0">&quot; arr5= %d \n arr2=%d \n arr5[0]==arr2[0]= %s \n&quot;</span>, arr5, arr2, arr5[<span style="color:#40a070">0</span>] <span style="color:#666">==</span> arr2[<span style="color:#40a070">0</span>])

	OutPut:
	 arr5=[<span style="color:#40a070">5</span> <span style="color:#40a070">2</span> <span style="color:#40a070">0</span> <span style="color:#40a070">0</span> <span style="color:#40a070">0</span>]
     arr2=[<span style="color:#40a070">1</span> <span style="color:#40a070">2</span> <span style="color:#40a070">0</span> <span style="color:#40a070">0</span> <span style="color:#40a070">2</span>]
     arr5[<span style="color:#40a070">0</span>]<span style="color:#666">==</span>arr2[<span style="color:#40a070">0</span>]= <span style="color:#007020;font-weight:700">false</span>
</pre></div><h3 id="切片-slices">切片 Slices</h3><p>数组的长度不可改变，在特定场景中这样的集合就不太适用，Go中提供了一种灵活，功能强悍的内置类型<strong>Slices</strong>切片,与数组相比切片的长度是不固定的，可以追加元素，在追加时可能使切片的容量增大。切片中有两个概念：一是<strong>len长度</strong>，二是<strong>cap容量</strong>，长度是指已经被赋过值的最大下标+1，可通过内置函数len()获得。容量是指切片目前可容纳的最多元素个数，可通过内置函数cap()获得。切片是引用类型，因此在当传递切片时将引用同一指针，修改值将会影响其他的对象。</p><h4 id="初始化-1">初始化</h4><p>切片可以通过数组来初始化，也可以通过内置函数make()初始化 .初始化时len=cap,在追加元素时如果容量cap不足时将按len的<strong>2</strong>倍扩容 <a href="slicesInitDemo">查看示例代码</a>，<a href="slicesInitDemo_play">在线运行示例代码</a></p><ul><li><code>s :=[] int {1,2,3 }</code><br>直接初始化切片，<strong>[]</strong>表示是切片类型，<strong>{1,2,3}</strong>初始化值依次是1,2,3.其cap=len=3</li><li><code>s := arr[:]</code><br>初始化切片s,是数组arr的引用</li><li><code>s := arr[startIndex:endIndex]</code><br>将arr中从下标startIndex到endIndex-1 下的元素创建为一个新的切片</li><li><code>s := arr[startIndex:]</code><br>缺省endIndex时将表示一直到arr的最后一个元素</li><li><code>s := arr[:endIndex]</code><br>缺省startIndex时将表示从arr的第一个元素开始</li><li><code>s1 := s[startIndex:endIndex]</code><br>通过切片s初始化切片s1</li><li><code>s :=make([]int,len,cap)</code><br>通过内置函数make()初始化切片s,[]int 标识为其元素类型为int的切片</li></ul><h4 id="赋值与使用-1">赋值与使用</h4><p>切片是引用类型，在使用时需要注意其操作。<a href="slicesValueDemo">查看示例代码</a> ，<a href="slicesValueDemo_play">在线运行示例代码</a> 切片可以通过内置函数append(slice []Type,elems &hellip;Type)追加元素，elems可以是一排type类型的数据，也可以是slice,因为追加的一个一个的元素，因此如果将一个slice追加到另一个slice中需要带上&rdquo;<strong>&hellip;</strong>&ldquo;，这样才能表示是将slice中的元素依次追加到另一个slice中。另外在通过下标访问元素时下标不能超过len大小，如同数组的下标不能超出len范围一样。</p><ul><li><code>s :=append(s,1,2,3,4)</code></li><li><code>s :=append(s,s1...)</code></li></ul></div><aside id="meta"><meta itemprop="wordCount" content="158"><meta itemprop="url" content="https://yushuangqi.com/blog/2013/ysqi-golang-array-slice.html"></aside></article><div><div class="attribution"><div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_youdao" data-cmd="youdao" title="分享到有道云笔记"></a><a href="#" class="bds_mshare" data-cmd="mshare" title="分享到一键分享"></a></div><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","qzone","tsina","bdysc","weixin","tqq","tieba","douban","sqq","youdao","qingbiji","mail","evernotecn","copy","print"],"bdPic":"","bdStyle":"0","bdSize":"32"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script></div><div><ul class="rel_links"><li class="rel_linksli"><span id="topics">分类: <a href="/topics/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%BC%80%E5%8F%91.html" rel="category">编程语言与开发</a> </span><span id="tags">标签: <a href="/tags/go.html" rel="tag">Go</a> <a href="/tags/%E6%95%99%E7%A8%8B.html" rel="tag">教程</a> <a href="/tags/%E7%AC%94%E8%AE%B0.html" rel="tag">笔记</a></span></li><li class="rel_linksli rel_prev"><a href="https://yushuangqi.com/blog/2013/ysqi-golang-const.html">老虞学Golang-常量</a></li><li class="rel_linksli rel_next"><a href="https://yushuangqi.com/blog/2013/ysqi-golang-var-init.html">老虞学golang-变量声明与初始化</a></li></ul></div><aside id="comments"><div><div class="ds-thread" data-thread-key="0093f2ff4a7c22ff43c339c56993c2f7" data-title="老虞学Golang-数组和切片" data-url="https://yushuangqi.com/blog/2013/ysqi-golang-array-slice.html"></div></div></aside><div><section id="author"><h4>About author</h4><p><strong>虞双齐</strong>，全栈开发工程师，Google SRE实践者。提供Golang开发、技术实践与架构等咨询服务。</p><p>动态分享到微博<a href="http://weibo.com/234665601" rel="nofollow">@虞双齐</a>，代码存放在 <a href="http://github.com/ysqi" rel="nofollow">Github</a>，博文分享在 <a href="https://yushuangqi.com" title="虞双齐Golang开发与SRE运维">个人博客</a>上。</p></section></div></div></section><section id="sidebar" role="complementary"><aside class="writings"><a href="/" class="sideimg sideimgwritings">Home</a> <q class="dquote">读书之法，莫贵于循序而致精。<cite>—宋·朱熹《性理精义》</cite></q><ul class="rel_links"><li class="rel_linksli"><a href="http://weibo.com/234665601" title="关注虞双齐的微博" rel="nofollow">我的微博</a></li><li class="rel_linksli"><a href="https://github.com/ysqi" title="访问虞双齐的Github" rel="nofollow">我的 Github</a></li></ul></aside><aside><div class="ds-recent-comments" data-num-items="5" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="70"></div></aside></section><nav id="menu" role="navigation"><ul id="nav" class="navlist"><li class="navtop"><a class="navtoplink" href="#page"><span>Top</span></a></li><li><a class="navabout" href="https://yushuangqi.com"><span>首页</span></a></li><li><a class="navwritings" href="/topics/"><span>博文</span></a></li><li><a class="navpresos" href="/book.html"><span>电子书</span></a></li><li><a class="navabout" href="/about.html"><span>关于我</span></a></li></ul></nav></div><footer class="site-footer"><ul class="footeractions"><li><a class="footeraction" href="http://weibo.com/234665601" rel="nofollow"><span class="footeractionWeibo">Follow on Weibo</span></a></li><li><a href="http://validator.w3.org/check?uri=https%3a%2f%2fyushuangqi.com%2fblog%2f2013%2fysqi-golang-array-slice.html" rel="nofollow" target="blank"><img src="https://static.yushuangqi.com//assets/valid-html401.png" alt="Valid XHTMl 4.0"></a></li><li><a href="http://jigsaw.w3.org/css-validator/validator?uri=https%3a%2f%2fyushuangqi.com%2fblog%2f2013%2fysqi-golang-array-slice.html" rel="nofollow" target="blank"><img src="https://static.yushuangqi.com//assets/valid-css2.png" alt="Valid XHTMl 4.0"></a></li></ul><p>©2015-2016 虞双齐-#Golang开发 #SRE运维。欢迎<a href="/about.html" rel="nofollow">联系我</a>，<a href="http://www.miitbeian.gov.cn/" target="bank" rel="nofollow" style="color:#c9c9c9">粤ICP备14032560号-4</a></p></footer><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-44627932-2', 'auto');
  ga('send', 'pageview');</script></body></html>